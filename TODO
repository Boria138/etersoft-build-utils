http://git.altlinux.org/people/kharpost/packages/gitalt-tasker.git?p=gitalt-tasker.git;a=blob;f=gitalt-tasker/git-task;h=81e0261813a9fe2be230fb0c47b4ff4efd9a2675;hb=bfcc80b9af49b8ea0629db80d4c2f29a024d574e

не раобтает указание цкелевого каталога в korinf

Добавить служебный комментарий для перепаковки исходников:
# etersoft-build-utils repack DIR - упаковать DIR в архив с названием NAME-VERSION
# etersoft-build-utils remove DIR/FILE [DIR/FILE] - удалить указанные каталоги и файлы и упаковать

Удаление пакета из Сизифа: 
ssh git.alt task new
ssh git.alt task add del PACKAGE
ssh git.alt task run

[lav@lav ~]$ ssh git.alt task add del python-module-pyclamav
girar-check-perms: access to python-module-pyclamav ALLOWED for lav: approved builder
task #9430: added #1: delete package python-module-pyclamav from sisyphus
[lav@lav ~]$ ssh git.alt task run
task #9430: queued, result will be emailed to lav@altlinux.org


сделать раскрытие версии и имени пакета:
fonts-ttf-%fname-1.04-alt1.src.rpm

rpmbph: переписать с --define _specdir --define _sourcedir

apt-cache list-extras

Нужно убирать BuildArch: noarch при бэкпортировании
Нужно добавлять устаревшие ныне секции при бэкпортировании


todo rebuild:
#!/bin/sh -le
${verbose:+set -x}
export -n target ||:
exec time rpmbuild --target="\$target" $nodeps -bs "\$@"


!!
Изменить порядок поиска замен, чтобы он происходил без базовой версии, а замены от предыдущей версии
действовали на следующие (тогда нужно вводить понятие порядка версий). Таким образом, файл с общими заменами не нужен,
а при поиске нужно искать с текущей версии до меньших.

При rpmbb в git не пишется лог сборки

Нужно сделать замену требований к пакетам только для Req (и уж точно не для )
подробнее рассказывать, почему не работает hasher
сейчас хэшер вызывается с src.rpm из SRPMS

файлы с заменой:
пакет ALT - пакет замены
pkgrepl.rpm - базовый, используется всегда
pkgrepl.pclinux - для конкретной системы
pkgrepl.pclinux.2007 - для конкретной версии системы
записываем, откуда (из ALT) на что в другой системе менять

Сделать -x для удалённой сборки на x86_64?
%homedir в определении tmp не работает?

Реализовать rpm -bE через rpm --showrc ?

=== Текущая разработка ===

Есть ещё пакеты с версией в виде даты (именно версией, а не релизом). Их 
тоже желательно не забыть (в том числе в части, касающейся 
макроподстановок). Но это, кажется, ещё более сложная задача.


 
=== Версия 1.7 ===
 - Не трогать часть файла после %changelog при rpmcs
 - добавить сборки раскидавшихся зависимостей на Иксы в одну
 - rpmbph для src.rpm (через hasher):
   --init-root, .in, rpm -i src.rpm, rpmbph (не собирающий в hasher), .out { команды в скобках }
   чтобы спек исправлял прямо в hasher при сборке??
 - подготовить текст новости, порекламировать
 - обновить/сделать страницу с описанием проекта?

=== Версия 1.8 ===
 - how to use --build-args= for hsh? - проброс параметров в myhsh как параметров для rpm
 - Сделать нормальную документацию?
 - получение спеков из других проектов, с отчётом об обновлении (diff между)
 - исправить формирование .pot
 - исправить способ создания pot -и echog (заметить на message)

=== Версия 2.0 ===
 - удалить файл /etc/rpm/*functions
 - доделать проверку на качество лицензии в LICENSE и содержимое INSTALL
 - TODO: добавить возможность указания запускаемой команды
   (разделяя строку параметров на до -- и после)
 - -i -u требуют именно такого порядка использования
 - перейти на общую обработку всех команд (одним скриптом)?


Каждый мантейнер (если боится забыть посмотреть лог сборки) может
уже сейчас сделать себе alias вида
alias hsh="hsh --build='--define \"_unpackaged_files_terminate_build 1\"'"
не говоря уже про ~/.rpmmacros

Unpackaged:
awk '
            on { if (/^ +\//) print $0; else on=0 }
            /^warning: Installed \(but unpackaged\)/ { on=1; print $0 }
        ' <"$LOG_FILE"


----
$ list="line1
 line2
 line3"
$ a=qqq
$ while read l; do a="$l"; done < <(echo "$list")
$ echo $a
line3


> >>:) 3. Было бы здорово, чтобы скрипты сначала проверяли
> >>
> >>передаваемые им аргументы, а потом начинали печатать
> >> служебную информацию, как то какой apt.conf они будут
> >> использовать.
> >
> >Не понял проблемы.
>
> Попробуйте написать rpmgs --help :)

#   - short-circuit работает только с -bc и -bi на других платформах :(
